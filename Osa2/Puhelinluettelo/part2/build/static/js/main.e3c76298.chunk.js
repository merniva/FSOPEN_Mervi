(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),u=n.n(a),l=n(13),c=n.n(l),r=n(2),o=n(3),i=n.n(o),m="/api/persons",s=function(){return i.a.get(m).then((function(e){return e.data}))},f=function(e){return i.a.post(m,e).then((function(e){return e.data}))},h=function(e,t){return i.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},E=(n(36),function(e){var t=e.msg;return null===t?null:u.a.createElement("div",{className:"notificationMsg"},t)}),v=function(e){var t=e.msg;return null===t?null:u.a.createElement("div",{className:"errorMsg"},t)},p=function(e){var t=e.searchName,n=e.handleFilterChange;return u.a.createElement(u.a.Fragment,null,u.a.createElement("div",null,u.a.createElement("div",null,u.a.createElement("input",{value:t,onChange:n}))),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"Rajaa")))},b=function(e){var t=e.addName,n=e.newName,a=e.newNumber,l=e.handleNameChange,c=e.handleNumberChange;return u.a.createElement("form",{onSubmit:t},u.a.createElement("div",null,u.a.createElement("div",null,"Nimi: ",u.a.createElement("input",{value:n,onChange:l})),u.a.createElement("div",null,"Numero: ",u.a.createElement("input",{value:a,onChange:c}))),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"Lis\xe4\xe4")))},g=function(e){var t=e.persons,n=e.searchName,a=e.handleDeleteClick;return u.a.createElement(u.a.Fragment,null,t.filter((function(e){var t=e.name;return t&&t.toLowerCase().includes(n.toLowerCase())})).map((function(e){return u.a.createElement("p",{key:e.name},e.name," ",e.number," ",u.a.createElement("button",{onClick:function(){return a(e)},value:e.id},"Poista"))})))},N=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],l=t[1],c=Object(a.useState)(""),o=Object(r.a)(c,2),i=o[0],m=o[1],N=Object(a.useState)(""),j=Object(r.a)(N,2),k=j[0],C=j[1],O=Object(a.useState)(""),w=Object(r.a)(O,2),S=w[0],y=w[1],T=Object(a.useState)(null),F=Object(r.a)(T,2),H=F[0],L=F[1],D=Object(a.useState)(null),J=Object(r.a)(D,2),M=J[0],P=J[1];Object(a.useEffect)((function(){s().then((function(e){l(e)}))}),[]);return u.a.createElement("div",null,u.a.createElement("h2",null,"Puhelinluettelo"),u.a.createElement(E,{msg:H}),u.a.createElement(v,{msg:M}),u.a.createElement("h3",null,"Etsi nimell\xe4"),u.a.createElement(p,{searchName:S,handleFilterChange:function(e){y(e.target.value)}}),u.a.createElement("h3",null,"Lis\xe4\xe4 uusi numero"),u.a.createElement(b,{addName:function(e){e.preventDefault();var t={name:i,number:k},a=n.find((function(e){return e.name===t.name}));a?window.confirm("".concat(i," on jo lis\xe4tty luetteloon, haluatko p\xe4ivitt\xe4\xe4 numeron?"))&&h(a.id,t).then((function(e){l(n.map((function(t){return t.id!==e.id?t:e}))),L("Henkil\xf6n ".concat(e.name," tiedot muutettu!")),setTimeout((function(){L(null)}),5e3)})).catch((function(e){console.log(e),P("Henkil\xf6 '".concat(i,"' on jo poistettu tietokannasta!")),setTimeout((function(){P(null)}),5e3)})):f(t).then((function(e){l(n.concat(e)),L("".concat(e.name," lis\xe4tty luetteloon!")),setTimeout((function(){L(null)}),5e3)}));m(""),C("")},newName:i,newNumber:k,handleNameChange:function(e){m(e.target.value)},handleNumberChange:function(e){C(e.target.value)}}),u.a.createElement("h3",null,"Numerot"),u.a.createElement(g,{persons:n,searchName:S,handleDeleteClick:function(e){var t=e.name,n=e.id;window.confirm("Haluatko varmasti poistaa henkil\xf6n ".concat(t,"?"))&&d(n).then((function(){return s().then((function(t){l(t),L("".concat(e.name," poistettu tietokannasta!")),setTimeout((function(){L(null)}),5e3)}))})).catch((function(e){console.log(e),P("Henkil\xf6 ".concat(t," on jo poistettu tietokannasta!")),setTimeout((function(){P(null)}),5e3)}))}}))};c.a.render(u.a.createElement(N,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.e3c76298.chunk.js.map